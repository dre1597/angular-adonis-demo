<p-toast></p-toast>
<app-form-card title="Register">
  <form [formGroup]="form" body>
    <span class="p-float-label">
      <input
        [ngClass]="
          username?.invalid && (username?.dirty || username?.touched)
            ? 'ng-invalid ng-dirty'
            : ''
        "
        class="w-full"
        formControlName="username"
        id="username"
        name="username"
        pInputText
      />
      <label for="email">Username</label>
    </span>

    <div *ngIf="username?.invalid && (username?.dirty || username?.touched)">
      <small
        *ngIf="username?.errors?.['required']"
        class="p-error"
        id="required-username"
      >
        Username is required.
      </small>
      <small
        *ngIf="username?.errors?.['minlength']"
        class="p-error"
        id="minlength-username"
      >
        Username must be at least 3 characters.
      </small>
      <small
        *ngIf="username?.errors?.['maxlength']"
        class="p-error"
        id="maxlength-username"
      >
        Username must be at most 24 characters.
      </small>
    </div>

    <span class="p-float-label mt-4">
      <input
        [ngClass]="
          email?.invalid && (email?.dirty || email?.touched)
            ? 'ng-invalid ng-dirty'
            : ''
        "
        class="w-full"
        formControlName="email"
        id="email"
        name="email"
        pInputText
        type="email"
      />
      <label for="email">Email</label>
    </span>

    <div *ngIf="email?.invalid && (email?.dirty || email?.touched)">
      <small
        *ngIf="email?.errors?.['required']"
        class="p-error"
        id="required-email"
      >
        Email is required.
      </small>
      <small
        *ngIf="email?.errors?.['pattern']"
        class="p-error"
        id="invalid-email"
      >
        Email format is invalid.
      </small>
    </div>

    <span class="p-float-label mt-4">
      <input
        [feedback]="false"
        [ngClass]="
          password?.invalid && (password?.dirty || password?.touched)
            ? 'ng-invalid ng-dirty'
            : ''
        "
        class="w-full"
        formControlName="password"
        id="password"
        pPassword
        type="password"
      />
      <label for="password">Password</label>
    </span>

    <div *ngIf="password?.invalid && (password?.dirty || password?.touched)">
      <small
        *ngIf="password?.errors?.['required']"
        class="p-error"
        id="required-password"
      >
        Password is required.
      </small>
      <small
        *ngIf="password?.errors?.['minlength']"
        class="p-error"
        id="minlength-password"
      >
        Password must be at least 6 characters.
      </small>
      <small
        *ngIf="password?.errors?.['maxlength']"
        class="p-error"
        id="maxlength-password"
      >
        Password must be at most 24 characters.
      </small>
    </div>

    <span class="p-float-label mt-4">
      <input
        [feedback]="false"
        [ngClass]="
          confirmPassword?.invalid &&
          (confirmPassword?.dirty || confirmPassword?.touched)
            ? 'ng-invalid ng-dirty'
            : ''
        "
        class="w-full"
        formControlName="confirmPassword"
        id="confirmPassword"
        pPassword
        type="password"
      />
      <label for="confirmPassword">Confirm Password</label>
    </span>

    <div
      *ngIf="
        confirmPassword?.invalid &&
        (confirmPassword?.dirty || confirmPassword?.touched)
      "
    >
      <small
        *ngIf="confirmPassword?.errors?.['required']"
        class="p-error"
        id="required-confirmPassword"
      >
        Confirm password is required.
      </small>
      <small
        *ngIf="confirmPassword?.errors?.['minlength']"
        class="p-error"
        id="minlength-confirmPassword"
      >
        Confirm password must be at least 6 characters.
      </small>
      <small
        *ngIf="confirmPassword?.errors?.['maxlength']"
        class="p-error"
        id="maxlength-confirmPassword"
      >
        Confirm password must be at least 24 characters.
      </small>
    </div>
  </form>

  <p-button
    (click)="submitForm()"
    [disabled]="!form.valid"
    footer
    icon="pi pi-check"
    label="Create"
    type="button"
  />
  <p-button
    footer
    icon="pi pi-arrow-right"
    iconPos="right"
    label="Login"
    routerLink="/login"
    type="button"
  />
  <p-button
    footer
    icon="pi pi-arrow-right"
    iconPos="right"
    label="Forgot Password"
    routerLink="/forgot-password"
    type="button"
  />
</app-form-card>
